# tech-assign
## Техническое задание
Техническое задание в [SPECIFICATION.md](./SPECIFICATION.md)

## Запуск
```shell
docker-compose up --build -d
```
## Структура проекта

```shell
|- README.md    // этот файл
|- SPECIFICATION.md     // ТЗ на проект
|- requirements.txt     // зависимости для работы приложения
|- requirements.dev.txt     // зависимости для разработки приложения
|- docker-compose.yaml    // конфиг для запуска необхзодимых сервисов
|- docker-build     // докер-конфиги для сборки контейнеров (1)
   |- main_app    // Здесь единственный докер-конфиг для основного приложения
|- backend    // Основное приложение
   |- alembic.ini     // настройки alembic
   |- alembic     // дирректория для работы с alembic, тут все нужные миграции
   |- .env.*    // предзаготовленные наборы переменных окружения для сервисов
   |- run_or_migrate.sh     // скрипт для запуска или миграций, или приложения
   |- app     // FastApi-приложение
      |- main_router.py     // Основной файл fastapi-приложения
      |- routers    // Рутеры приложения, логически разбитые на решаемые задачи
        |- service  // Роутер сервисных функций, пока там только схемы для ping-запроса
          |- schemas // Схемы ответа сервисных функций
        |- order  // Роутер по работе с посылками
          |- schemas // Схемы параметров/ответов функций по работе с посылками
          |- api // описание роутов для роутеров
          |- crud // create-update-delete - логика, вынесенная в отдельные функции
        |- periodic // Роутер по дебажной работе с периодическими задачами eg форсированный запуск
          |- api   // описание роутов для роутеров (круды вынесены в периодические задачи - ниже)
          |- schemas // Схемы параметров/ответов функций по работе с периодическими функциями
   |-core  // common-элементы, которые используются другими частями приложения и не раз
      |- dependencied // пока единственная fastapi-dependency по авторизации пользователя
      |- database // работа с базами
        |-base.py //базовый класс для SQLAlchemy и alembic
        |-dbHelper //вспомогательный класс для работы с mysql
        |-mixins.py // "примеси" для моделей, специфика SQLAlchemy
        |-redisHelper.py //вспомогателльный класс для работы с redisHelper
        |- models // ORM-модели SQLAlchemy
          |- order.py // модель посылок
          |- user.py // модель пользователей
      |-config.py // вспомогательный класс настроек приложения
      |-logger.py // вспомогательный класс для логирования
   |-periodic // все что связанно с периодическими задачами
      |-tasks.py // набор Celery тасков
      |-celeryneat_schedule.py // планировщик celeryneat_schedule
      |-crud // набор фукнций необходимый для работы периодических задач
```

## Разработка
1. В PyCharm устанавливаем virtualenv (Python3.13)

3. установка всех зависимостей
для работы приложения
```shell
pip install -r requirements.txt
```
для девелоперских штучек: линтеры/прекоммиты
```shell
pip install -r requirements.dev.txt
```

4. Устанавливаем хук для pre-commit (для прогона линтеров по коду до коммита в репозиторий)
```shell
pre-commit install
```
5. Кодим
6. .....
7. Прогоняем линтерами по наколбашенному (при необходимости)
```shell
pre-commit run --all-files
```
